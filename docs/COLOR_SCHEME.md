# 3D可视化颜色方案说明

## 当前配色

3D专家激活可视化使用自定义的蓝-粉渐变配色方案，专门优化用于数据可视化的清晰度和可读性。

### 颜色渐变

```
低激活 ────────────────────────────────────► 高激活
  0%         25%         50%         75%        100%
#19448e → #4a6fa5 → #7d8db8 → #c49fbb → #f4b3c2
深蓝色    中蓝色    浅蓝紫    浅紫粉    粉红色
  ███      ████      █████      █████      ████
```

### 颜色映射详情

| 激活概率 | 颜色代码 | 颜色名称 | 视觉效果 |
|---------|---------|---------|---------|
| 0.0 - 0.25 | #19448e | 深蓝色 | 低激活，深色调 |
| 0.25 - 0.50 | #4a6fa5 | 中蓝色 | 中低激活，过渡色 |
| 0.50 - 0.75 | #7d8db8 | 浅蓝紫色 | 中高激活，明亮过渡 |
| 0.75 - 1.00 | #c49fbb | 浅紫粉色 | 高激活，高对比度 |
| 1.00 | #f4b3c2 | 粉红色 | 最高激活，最亮色 |

## 配色优势

### ✅ 相比默认"Hot"配色的改进

| 特性 | 原"Hot"配色 | 新蓝-粉配色 |
|------|------------|------------|
| **最高值颜色** | 白色/黄色 | 粉红色 |
| **可读性** | 白色在浅背景上难以辨认 | 粉红色清晰可见 |
| **对比度** | 黑→红→黄→白（4色） | 深蓝→浅蓝→紫→粉（5色） |
| **视觉舒适度** | 高亮刺眼 | 柔和清晰 |
| **数据区分度** | 中等（热色调集中） | 优秀（冷暖对比） |

### 🎨 设计理念

1. **冷暖对比**: 低激活用冷色（蓝），高激活用暖色（粉）
2. **渐变平滑**: 5个关键点确保过渡自然
3. **避免极端**: 不使用纯黑或纯白，保证可读性
4. **色彩心理**: 蓝色=稳定/低活跃，粉色=活跃/高关注

## 使用场景

### 适合的背景

- ✅ 白色/浅色背景（默认）
- ✅ 灰色背景
- ✅ 深色背景（略微调整透明度）
- ✅ 投影演示（高对比度）

### 数据类型

- ✅ 概率分布 (0-1)
- ✅ 归一化激活值
- ✅ 相对强度数据
- ✅ 任何需要清晰区分高低值的数据

## 自定义颜色方案

### 修改方法

编辑 `visualizer.py` 中的 `plot_expert_activation_3d` 方法：

```python
# 找到这部分代码
custom_colorscale = [
    [0.0, '#19448e'],   # 修改这里的颜色代码
    [0.25, '#4a6fa5'],
    [0.5, '#7d8db8'],
    [0.75, '#c49fbb'],
    [1.0, '#f4b3c2']
]
```

### 推荐配色方案

#### 1. 绿-橙配色（交通灯风格）
```python
custom_colorscale = [
    [0.0, '#2ecc71'],   # 绿色 - 低激活（安全）
    [0.5, '#f39c12'],   # 橙色 - 中等激活（警告）
    [1.0, '#e74c3c']    # 红色 - 高激活（警报）
]
```

#### 2. 蓝-黄配色（经典科学配色）
```python
custom_colorscale = [
    [0.0, '#2c3e50'],   # 深蓝
    [0.5, '#3498db'],   # 亮蓝
    [1.0, '#f1c40f']    # 黄色
]
```

#### 3. 紫-绿配色（对比强烈）
```python
custom_colorscale = [
    [0.0, '#8e44ad'],   # 紫色
    [0.5, '#95a5a6'],   # 灰色
    [1.0, '#2ecc71']    # 绿色
]
```

#### 4. 使用Plotly内置配色
```python
colorscale='Viridis'  # 科学可视化标准
# 其他选项: 'Plasma', 'Inferno', 'Cividis', 'Turbo', 'Rainbow'
```

### 颜色选择建议

1. **高对比度**: 确保最低和最高值颜色差异明显
2. **避免极端**: 不用纯黑(#000000)或纯白(#ffffff)
3. **考虑色盲**: 避免只用红绿对比
4. **测试背景**: 在目标背景上测试可读性
5. **保持一致**: 同一系列可视化使用相同配色

## 色彩无障碍性

当前蓝-粉配色对色盲友好程度：

| 色盲类型 | 友好度 | 说明 |
|---------|-------|------|
| **红色盲** | ⭐⭐⭐⭐⭐ | 优秀（蓝色清晰可见） |
| **绿色盲** | ⭐⭐⭐⭐⭐ | 优秀（蓝粉对比明显） |
| **蓝色盲** | ⭐⭐⭐ | 良好（粉色仍可识别） |
| **全色盲** | ⭐⭐⭐⭐ | 很好（明度对比足够） |

### 提高无障碍性的方法

如果需要更好的色盲支持，可以使用：

```python
# Viridis配色（为色盲优化）
colorscale='Viridis'

# 或自定义明度优先的渐变
custom_colorscale = [
    [0.0, '#000000'],   # 黑色
    [0.5, '#808080'],   # 灰色
    [1.0, '#ffffff']    # 白色
]
```

## 技术说明

### Plotly颜色格式

Plotly支持多种颜色格式：

```python
# 1. 十六进制 (推荐)
'#19448e'

# 2. RGB
'rgb(25, 68, 142)'

# 3. RGBA (带透明度)
'rgba(25, 68, 142, 0.8)'

# 4. 颜色名称
'blue'
```

### 颜色插值

Plotly会在指定的关键点之间进行线性插值：

```python
[
    [0.0, '#19448e'],   # 关键点1: 0%
    [0.5, '#7d8db8'],   # 关键点2: 50% (会自动插值 0-50% 之间的颜色)
    [1.0, '#f4b3c2']    # 关键点3: 100% (会自动插值 50-100% 之间的颜色)
]
```

### 颜色空间

当前使用RGB颜色空间。如需更平滑的渐变，考虑使用：
- **HSL**: 色相-饱和度-亮度
- **LAB**: 感知均匀的颜色空间

## 示例对比

### 场景1: 均匀分布数据 (0.0 - 1.0)
```
原"Hot"配色: 
    低值(黑色) → 中值(红橙色) → 高值(白色)
    ⚠️ 白色区域难以在浅背景上辨认

新蓝-粉配色:
    低值(深蓝) → 中值(浅蓝紫) → 高值(粉色)
    ✅ 所有值在任何背景上都清晰可见
```

### 场景2: 集中分布数据 (大部分值在0.8-1.0)
```
原"Hot"配色:
    大部分数据显示为黄-白色
    ⚠️ 缺乏区分度

新蓝-粉配色:
    大部分数据显示为浅紫-粉色
    ✅ 高值区域仍有良好的色彩区分
```

### 场景3: 稀疏激活 (大部分值接近0)
```
原"Hot"配色:
    大片深色区域
    ✅ 低值区域清晰

新蓝-粉配色:
    深蓝色区域
    ✅✅ 深蓝比黑色更有层次感
```

## 实际效果预览

运行分析后查看 `expert_activation_3d.html`，你将看到：

- **深蓝色峰谷**: 低激活区域
- **蓝紫色平原**: 中低激活区域
- **紫粉色高地**: 中高激活区域
- **粉色山峰**: 高激活区域

## 常见问题

**Q: 为什么不用彩虹配色？**
A: 彩虹配色虽然丰富，但：
- 视觉上不均匀（绿色区域过亮）
- 色盲不友好
- 不适合表示单一维度的数值

**Q: 能否只用蓝色渐变？**
A: 可以，但冷暖对比更容易区分高低值。单色渐变适合需要统一色调的场景。

**Q: 如何选择适合我数据的配色？**
A: 考虑以下因素：
1. 数据范围和分布
2. 展示环境（屏幕/投影/打印）
3. 目标受众（是否有色盲人群）
4. 品牌或领域惯例（如金融常用红绿）

## 参考资源

- [Plotly颜色文档](https://plotly.com/python/builtin-colorscales/)
- [ColorBrewer配色工具](https://colorbrewer2.org/)
- [Coolors配色生成器](https://coolors.co/)
- [Adobe Color](https://color.adobe.com/)

---

享受清晰美观的数据可视化！🎨

